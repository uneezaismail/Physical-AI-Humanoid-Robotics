# Implementation Plan: Docusaurus Native Urdu Translation

**Branch**: `002-urdu-translation` | **Date**: 2025-12-18 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/002-urdu-translation/spec.md`

**Note**: This plan was generated by the `/sp.plan` command following the Spec-Driven Development workflow.

## Summary

Implement multilingual support for the Physical AI textbook using Docusaurus's built-in internationalization (i18n) system. The feature enables users to access documentation content in both English and Urdu through standard locale-based URL paths (`/docs/...` for English, `/ur/docs/...` for Urdu). Users switch languages via the native `localeDropdown` component in the navbar. Only documentation content (book chapters) is translated; homepage, authentication pages, and UI elements remain in English. Urdu pages automatically apply RTL (right-to-left) layout through Docusaurus's built-in locale configuration.

## Technical Context

**Language/Version**: TypeScript 5.x (React 18+ via Docusaurus 3.x)
**Primary Dependencies**:
- Docusaurus 3.x (static site generator with native i18n support)
- React 18+ (UI framework, included with Docusaurus)
- @docusaurus/theme-classic (provides built-in localeDropdown component)

**Storage**: No client-side storage required - language selection is URL-based via Docusaurus routing
**Testing**: Manual verification of locale URLs, RTL layout, and translated content rendering
**Target Platform**: Modern web browsers (Chrome, Firefox, Safari, Edge) - desktop and mobile
**Project Type**: Static site with React (Docusaurus)
**Performance Goals**:
- Language switch < 2 seconds via navbar dropdown (SC-001)
- RTL layout applies instantly on Urdu page load (SC-002)
- Build process generates both locales without errors (SC-006)

**Constraints**:
- Static site deployment (Vercel)
- Uses standard Docusaurus i18n patterns (no custom language switching components)
- Docs-only translation (homepage, auth, navbar, footer remain English)
- No auto-redirect behavior (user-controlled navigation only)
- RTL layout must not break existing components
- Code blocks must remain in English with 100% accuracy (SC-003)

**Scale/Scope**:
- 2 languages (English as default, Urdu as additional locale)
- ~50-100 chapter pages (Part 1-5 of textbook)
- Single `localeDropdown` in navbar for all pages
- Pre-translated MDX files stored in `i18n/ur/docusaurus-plugin-content-docs/`

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Principle I: Educational Excellence First
**Status**: âœ… PASS
- **Rationale**: Feature enhances educational accessibility by enabling Urdu-speaking learners to access textbook content in their native language. Does not modify educational content structure or quality.
- **Verification**: Native i18n approach maintains content integrity. Pre-translated Urdu MDX files preserve all educational elements (code examples, diagrams, exercises).

### Principle II: Technical Accuracy & Verifiability
**Status**: âœ… PASS
- **Rationale**: Uses Docusaurus official i18n system following documented best practices. Pre-translated content files ensure accuracy through manual translation review.
- **Verification**: Code blocks remain in English (FR-005, SC-003). All locale configuration follows Docusaurus documentation. RTL support uses standard CSS `dir="rtl"` attribute.

### Principle III: Spec-Driven Development
**Status**: âœ… PASS
- **Rationale**: Following standard workflow: spec.md â†’ clarifications â†’ plan.md (current phase) â†’ tasks.md â†’ implementation
- **Verification**: Specification complete with clarifications resolved (docs-only translation, native approach, no auto-redirect). Plan being created before implementation.

### Principle IV: Type Safety & Async-First Design
**Status**: âœ… PASS
- **Rationale**: TypeScript strict mode enabled in Docusaurus config. Native components are fully typed by Docusaurus framework.
- **Verification**: Locale configuration uses TypeScript types from `@docusaurus/types`. No custom async operations required (Docusaurus handles routing internally).

### Principle V: Security & Privacy by Design
**Status**: âœ… PASS
- **Rationale**: No data collection, no localStorage, no cookies. Language selection is purely URL-based. No authentication changes.
- **Verification**: URLs are public and shareable. No sensitive data in locale paths. Auth system remains unchanged and English-only.

### Principle VI: Testing & Validation
**Status**: âœ… PASS (with test plan)
- **Platform Testing**:
  - Verify `/docs/...` URLs serve English content
  - Verify `/ur/docs/...` URLs serve Urdu content with RTL layout
  - Test locale switching via navbar dropdown
  - Verify untranslated chapters fall back to English (Docusaurus default behavior)
- **Content Validation**:
  - Verify code blocks remain in English across all Urdu pages (automated check)
  - Test RTL layout on all translated chapters
  - Verify sidebar labels display in Urdu for `/ur/docs/...`
- **User Experience Validation**:
  - Mobile responsive: localeDropdown accessible on all screen sizes
  - Cross-browser compatibility (Chrome, Firefox, Safari, Edge)
  - Verify no auto-redirect occurs (users stay on current page type)

### Principle VII: Progressive Enhancement & Graceful Degradation
**Status**: âœ… PASS
- **Rationale**: Feature uses standard HTML/CSS (no JavaScript required for core functionality). Docusaurus pre-renders all pages as static HTML.
- **Verification**: Locale links work without JavaScript (standard `<a>` tags). RTL layout applies via HTML `dir` attribute. Language dropdown degrades to standard navigation menu.

### Principle VIII: Performance & Scalability
**Status**: âœ… PASS
- **Rationale**: Static site generation with pre-built locale directories. No runtime translation overhead. Docusaurus optimizes bundle per locale.
- **Verification**:
  - < 2 second language switch (SC-001) - standard page navigation
  - Build generates both `build/` (English) and `build/ur/` (Urdu) directories
  - Vercel serves pre-rendered HTML for both locales
  - No impact on page load performance

### Principle IX: Observability & Debugging
**Status**: âœ… PASS
- **Rationale**: Docusaurus provides built-in build warnings for missing translations. Browser DevTools show locale routing in Network tab.
- **Verification**: Build process logs translation fallbacks. HTML source clearly shows `lang` and `dir` attributes. Network requests reveal locale paths.

### Principle X: Simplicity & Pragmatism (YAGNI)
**Status**: âœ… PASS
- **Rationale**: Zero custom components. Uses Docusaurus built-in i18n with minimal configuration. No over-engineering.
- **Verification**: Only configuration changes (docusaurus.config.ts), no new React components. No localStorage, no custom hooks, no state management. Pure Docusaurus native patterns.

## Project Structure

### Documentation (this feature)

```text
specs/002-urdu-translation/
â”œâ”€â”€ spec.md              # Feature specification (completed)
â”œâ”€â”€ plan.md              # This file (implementation plan)
â””â”€â”€ tasks.md             # Phase 2: Generated by /sp.tasks
```

### Source Code (repository root)

```text
frontend/
â”œâ”€â”€ docusaurus.config.ts        # MODIFIED: Add i18n config and localeDropdown
â”œâ”€â”€ i18n/
â”‚   â””â”€â”€ ur/                     # Urdu translations
â”‚       â””â”€â”€ docusaurus-plugin-content-docs/
â”‚           â”œâ”€â”€ current.json    # Sidebar labels in Urdu
â”‚           â””â”€â”€ current/        # Translated chapter MDX files
â”‚               â”œâ”€â”€ part-1-foundations-lab/
â”‚               â”‚   â”œâ”€â”€ chapter-01-embodied-ai.mdx
â”‚               â”‚   â”œâ”€â”€ chapter-02-hardware-setup.mdx
â”‚               â”‚   â””â”€â”€ chapter-03-physical-ai-architecture.mdx
â”‚               â””â”€â”€ part-2-robotic-nervous-system/
â”‚                   â”œâ”€â”€ chapter-04-ros2-architecture.mdx
â”‚                   â”œâ”€â”€ chapter-05-publisher-subscriber.mdx
â”‚                   â”œâ”€â”€ chapter-06-services-actions.mdx
â”‚                   â”œâ”€â”€ chapter-07-parameters-launch.mdx
â”‚                   â”œâ”€â”€ chapter-08-sensor-integration.mdx
â”‚                   â””â”€â”€ chapter-09-gazebo-simulation.mdx
â”œâ”€â”€ docs/                       # English chapter MDX files (unchanged)
â””â”€â”€ vercel.json                 # MODIFIED: API rewrites only (Root Directory set in Vercel dashboard)
```

**Structure Decision**: Docusaurus native i18n structure. All Urdu content lives in `i18n/ur/docusaurus-plugin-content-docs/` following official Docusaurus documentation. No custom components or theme modifications required. Build process automatically generates locale-specific directories in `build/` and `build/ur/`.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

**No violations detected.** Constitution Check passed all 10 principles. This is a pure configuration-based feature using Docusaurus built-in i18n with minimal complexity. No custom code required beyond configuration and pre-translated content files.

## Architecture Overview

### Core Design Decisions

**Decision 1: Native Docusaurus i18n vs Custom Translation System**
- **Chosen Approach**: Native Docusaurus i18n with locale paths
- **Rationale**:
  - Official, well-documented, and maintained by Docusaurus team
  - Built-in RTL support via locale configuration
  - Automatic SEO optimization (hreflang tags, separate sitemaps)
  - Zero custom code required
  - Standard URL structure (`/ur/docs/...`) for shareable links
- **Alternatives Considered**:
  - Custom React components with localStorage â†’ Rejected: Over-engineered, non-standard, breaks URL sharing
  - Runtime translation API â†’ Rejected: Slow, inaccurate for technical content, requires backend
- **Trade-offs**: Accepted trade-off of requiring manual translation files (benefit: accuracy), cannot dynamically switch language without page navigation (benefit: standard web behavior, SEO-friendly URLs)

**Decision 2: Docs-Only Translation vs Full Site Translation**
- **Chosen Approach**: Docs-only translation (homepage, auth, UI remain English)
- **Rationale**:
  - Educational content (textbook chapters) benefits most from translation
  - Auth system complexity kept low (single language)
  - Navbar/footer UI elements are minimal and universally understood
  - Reduces translation maintenance burden
  - Clearer user expectation (textbook is multilingual, platform is English)
- **Alternatives Considered**:
  - Full site translation â†’ Rejected: Unnecessary complexity, auth UX complications, higher maintenance
- **Implementation**: Only populate `i18n/ur/docusaurus-plugin-content-docs/`, skip `docusaurus-theme-classic/navbar.json` and other UI translation files

**Decision 3: Language Selection via localeDropdown vs Custom Component**
- **Chosen Approach**: Built-in `type: 'localeDropdown'` navbar item
- **Rationale**:
  - Zero code required (configuration only)
  - Maintained by Docusaurus (automatic updates, bug fixes)
  - Accessible by default (keyboard navigation, screen readers)
  - Consistent with Docusaurus ecosystem
  - Works on all page types (docs, homepage, auth)
- **Alternatives Considered**:
  - Custom LanguageSwitcher component â†’ Rejected: Unnecessary code, accessibility burden, maintenance overhead
- **Implementation**: Single navbar item in `docusaurus.config.ts`:
  ```typescript
  {
    type: 'localeDropdown',
    position: 'right',
  }
  ```

**Decision 4: No Auto-Redirect vs Auto-Redirect Based on Preference**
- **Chosen Approach**: No auto-redirect, users control navigation explicitly
- **Rationale**:
  - Predictable behavior (users land on the URL they requested)
  - Shareable URLs work correctly (no localStorage override)
  - Aligns with web standards (URL is source of truth)
  - Avoids confusion when sharing links
  - Respects user intent (if they click English link, show English)
- **Alternatives Considered**:
  - Auto-redirect based on localStorage â†’ Rejected: Breaks URL sharing, unpredictable behavior, non-standard
- **Implementation**: No LocaleRedirect component, no useEffect hooks, pure Docusaurus routing

### System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Docusaurus Build Process                 â”‚
â”‚                                                              â”‚
â”‚  docs/ (English MDX)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                                      â”‚                       â”‚
â”‚  i18n/ur/.../current/ (Urdu MDX) â”€â”€â”€â”¼â”€â”€â†’ Static Site Gen    â”‚
â”‚                                      â”‚                       â”‚
â”‚  docusaurus.config.ts (i18n config)â”€â”˜                       â”‚
â”‚                                                              â”‚
â”‚  Output:                                                     â”‚
â”‚  â”œâ”€â”€ build/                (English pages)                  â”‚
â”‚  â”‚   â”œâ”€â”€ index.html                                         â”‚
â”‚  â”‚   â”œâ”€â”€ docs/                                              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ part-1-foundations-lab/                        â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ chapter-01-embodied-ai/index.html         â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ ...                                        â”‚
â”‚  â”‚   â””â”€â”€ ...                                                â”‚
â”‚  â””â”€â”€ build/ur/            (Urdu pages)                      â”‚
â”‚      â”œâ”€â”€ index.html       (same as English homepage)        â”‚
â”‚      â”œâ”€â”€ docs/                                              â”‚
â”‚      â”‚   â”œâ”€â”€ part-1-foundations-lab/                        â”‚
â”‚      â”‚   â”‚   â”œâ”€â”€ chapter-01-embodied-ai/index.html (RTL)   â”‚
â”‚      â”‚   â”‚   â””â”€â”€ ...                                        â”‚
â”‚      â””â”€â”€ ...                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Vercel Platform â”‚
                    â”‚                  â”‚
                    â”‚  Root Directory: â”‚
                    â”‚  "frontend"      â”‚
                    â”‚                  â”‚
                    â”‚  Framework:      â”‚
                    â”‚  Docusaurus v2+  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         User Browser Requests            â”‚
        â”‚                                          â”‚
        â”‚  GET /docs/chapter-01  â”€â”€â†’ English HTML â”‚
        â”‚  GET /ur/docs/chapter-01 â”€â”€â†’ Urdu HTML  â”‚
        â”‚  GET /auth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ English HTMLâ”‚
        â”‚  GET /ur/auth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ English HTMLâ”‚
        â”‚  GET / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ English HTMLâ”‚
        â”‚  GET /ur/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ English HTMLâ”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Architecture

**No custom components required.** This feature is purely configuration-based.

**Modified Files**:
1. `frontend/docusaurus.config.ts`:
   - Add `i18n` configuration block with `en` and `ur` locales
   - Configure `localeConfigs` with RTL direction for Urdu
   - Add `localeDropdown` to navbar items
   - Ensure `trailingSlash: false` for Vercel compatibility

**New Directories**:
1. `frontend/i18n/ur/docusaurus-plugin-content-docs/`:
   - `current.json`: Sidebar labels in Urdu
   - `current/`: Translated MDX files mirroring `docs/` structure

**Docusaurus Built-in Components Used**:
- `localeDropdown`: Navbar component for language selection
- Docs plugin: Handles locale-specific content routing
- Theme: Applies RTL CSS automatically via `dir` attribute

### Data Flow

1. **Build Time**:
   ```
   Docusaurus reads docusaurus.config.ts
   â””â”€â†’ Detects i18n.locales: ['en', 'ur']
       â””â”€â†’ For each locale:
           â”œâ”€â†’ Reads content from docs/ (en) or i18n/ur/.../current/ (ur)
           â”œâ”€â†’ Reads sidebar from sidebars.ts (en) or i18n/ur/.../current.json (ur)
           â”œâ”€â†’ Applies localeConfig (direction: rtl for ur)
           â””â”€â†’ Generates static HTML in build/ (en) or build/ur/ (ur)
   ```

2. **Runtime (User Navigation)**:
   ```
   User visits /docs/chapter-01
   â””â”€â†’ Docusaurus router serves /docs/chapter-01/index.html (English)
       â””â”€â†’ Navbar shows localeDropdown with "English" selected
           â””â”€â†’ User clicks dropdown, selects "Ø§Ø±Ø¯Ùˆ"
               â””â”€â†’ Docusaurus navigates to /ur/docs/chapter-01
                   â””â”€â†’ Browser requests /ur/docs/chapter-01/index.html (Urdu + RTL)
   ```

3. **Fallback Behavior** (Untranslated Content):
   ```
   User visits /ur/docs/chapter-10-untranslated
   â””â”€â†’ Docusaurus checks i18n/ur/.../current/chapter-10-untranslated.mdx
       â””â”€â†’ File not found
           â””â”€â†’ Falls back to docs/chapter-10-untranslated.mdx (English content)
               â””â”€â†’ Serves English content with Urdu URL and RTL layout
   ```

## Technical Implementation Details

### Configuration Changes

**File**: `frontend/docusaurus.config.ts`

```typescript
const config: Config = {
  // ... existing config

  // CRITICAL for Vercel deployment with i18n
  trailingSlash: false,

  // Internationalization configuration
  i18n: {
    defaultLocale: "en",
    locales: ["en", "ur"],
    path: "i18n",
    localeConfigs: {
      en: {
        label: "English",
        direction: "ltr",
        htmlLang: "en-US",
      },
      ur: {
        label: "Ø§Ø±Ø¯Ùˆ",
        direction: "rtl",        // RIGHT-TO-LEFT for Urdu
        htmlLang: "ur-PK",
      },
    },
  },

  themeConfig: {
    navbar: {
      title: "Physical AI & Humanoid Robotics",
      items: [
        {
          type: "docSidebar",
          sidebarId: "tutorialSidebar",
          position: "left",
          label: "Textbook",
        },
        {
          type: "localeDropdown",  // Built-in language selector
          position: "right",
        },
        {
          type: "custom-auth-button",
          position: "right",
        },
        // ... GitHub link
      ],
    },
  },
};
```

### Content Structure

**English Content** (baseline):
```
frontend/docs/
â”œâ”€â”€ part-1-foundations-lab/
â”‚   â”œâ”€â”€ chapter-01-embodied-ai.mdx
â”‚   â”œâ”€â”€ chapter-02-hardware-setup.mdx
â”‚   â””â”€â”€ chapter-03-physical-ai-architecture.mdx
â””â”€â”€ part-2-robotic-nervous-system/
    â””â”€â”€ ... (chapters 04-09)
```

**Urdu Translations**:
```
frontend/i18n/ur/docusaurus-plugin-content-docs/
â”œâ”€â”€ current.json                           # Sidebar labels
â””â”€â”€ current/
    â”œâ”€â”€ part-1-foundations-lab/
    â”‚   â”œâ”€â”€ chapter-01-embodied-ai.mdx    # Urdu translation
    â”‚   â”œâ”€â”€ chapter-02-hardware-setup.mdx
    â”‚   â””â”€â”€ chapter-03-physical-ai-architecture.mdx
    â””â”€â”€ part-2-robotic-nervous-system/
        â””â”€â”€ ... (chapters 04-09, Urdu)
```

**Sidebar Labels** (`current.json`):
```json
{
  "tutorialSidebar": {
    "message": "Ø±ÛÙ†Ù…Ø§Ø¦ÛŒ Ø³Ø§Ø¦ÚˆØ¨Ø§Ø±",
    "description": "The label for the docs sidebar"
  },
  "part-1-foundations-lab": {
    "message": "Ø­ØµÛ I: Ø¨Ù†ÛŒØ§Ø¯ÛŒÚº Ø§ÙˆØ± Ù„ÛŒØ¨Ø§Ø±Ù¹Ø±ÛŒ",
    "description": "Part 1 category label"
  },
  "chapter-01-embodied-ai": {
    "message": "Ø¨Ø§Ø¨ 1: Ø¬Ø³Ù…Ø§Ù†ÛŒ Ø°ÛØ§Ù†Øª",
    "description": "Chapter 1 sidebar label"
  }
  // ... more labels
}
```

### Vercel Deployment Configuration

**File**: `frontend/vercel.json`

```json
{
  "rewrites": [
    {
      "source": "/api/auth/:match*",
      "destination": "https://[backend-url]/api/auth/:match*"
    },
    {
      "source": "/api/chat/:match*",
      "destination": "https://[backend-url]/api/chat/:match*"
    }
  ]
}
```

**Vercel Dashboard Settings** (configured manually):
- **Framework Preset**: Docusaurus (v2+)
- **Root Directory**: `frontend`
- **Build Command**: Auto-detected (`npm run build`)
- **Output Directory**: Auto-detected (`build`)

**Why Root Directory Matters**:
- Docusaurus project lives in `frontend/` subdirectory of monorepo
- Vercel needs to know to run `npm install` and `npm run build` from `frontend/`
- Without this setting, build fails (cannot find `package.json`)

### RTL Layout Implementation

**Automatic via Docusaurus**:
- When locale `direction: "rtl"` is set, Docusaurus automatically:
  - Adds `dir="rtl"` to `<html>` element on Urdu pages
  - Applies RTL CSS transformations to theme components
  - Mirrors layout (sidebar, navbar, TOC) automatically
  - Preserves LTR direction for code blocks

**No Custom CSS Required**:
- Docusaurus theme handles all RTL styling
- Text alignment, padding, margins, flex directions automatically flipped
- Mixed-direction content (Arabic text + English code) works out of the box

### URL Structure & Routing

**English (Default Locale)**:
```
/                           â†’ Homepage (English)
/docs/intro                 â†’ Docs intro (English)
/docs/part-1/.../chapter-01 â†’ Chapter 1 (English)
/auth                       â†’ Auth page (English)
```

**Urdu Locale**:
```
/ur/                        â†’ Homepage (English, not translated)
/ur/docs/intro              â†’ Docs intro (Urdu if translated, else English)
/ur/docs/part-1/.../chapter-01 â†’ Chapter 1 (Urdu + RTL)
/ur/auth                    â†’ Auth page (English, not translated)
```

**Behavior**:
- `/ur/*` URLs without docs content serve English content (homepage, auth remain English-only)
- Only `/ur/docs/*` URLs serve Urdu content
- No redirects between locales (URL is source of truth)
- `localeDropdown` provides navigation between corresponding pages

## Risk Analysis & Mitigation

### Risk 1: Incomplete Urdu Translations
**Likelihood**: Medium | **Impact**: Low | **Severity**: ğŸŸ¡ LOW-MEDIUM

**Description**: Some chapters may not have Urdu translations initially, leading to mixed English/Urdu experience.

**Mitigation**:
- Docusaurus automatically falls back to English content for untranslated files
- Users see English content on Urdu URLs (still readable, just not translated)
- Translation can be incremental (add Urdu files as they're ready)
- Sidebar labels can indicate translation status (optional)

**Detection**: Build process logs fallback warnings for missing translations

**Rollback**: N/A (graceful degradation, no breaking changes)

---

### Risk 2: RTL Layout Breaking Custom Components
**Likelihood**: Low | **Impact**: Medium | **Severity**: ğŸŸ¡ LOW-MEDIUM

**Description**: Custom components (FloatingChatButton, AuthModal) may not render correctly with RTL layout.

**Mitigation**:
- Test all custom components on `/ur/docs/*` pages
- Apply CSS fixes with `[dir="rtl"]` selectors if needed
- Most modern CSS (Flexbox, Grid) handles RTL automatically
- Auth pages remain English-only (not affected by RTL)

**Detection**: Manual visual testing on Urdu pages

**Rollback**: Add `direction: ltr !important;` to specific components if RTL breaks them

---

### Risk 3: Vercel Build Failures for Urdu Locale
**Likelihood**: Low | **Impact**: High | **Severity**: ğŸŸ  MEDIUM-HIGH

**Description**: Vercel may fail to build Urdu locale if Root Directory not configured correctly.

**Mitigation**:
- Explicitly set Framework: "Docusaurus (v2+)" and Root Directory: "frontend" in Vercel dashboard
- Test build locally with `cd frontend && npm run build` before deploying
- Verify both `build/` and `build/ur/` directories are generated

**Detection**: Vercel build logs, 404 errors on `/ur/docs/*` URLs in production

**Rollback**:
1. Check Vercel project settings (Framework and Root Directory)
2. Re-deploy with correct settings
3. If issue persists, temporarily disable Urdu locale in `docusaurus.config.ts`

---

### Risk 4: SEO Duplication Issues
**Likelihood**: Very Low | **Impact**: Low | **Severity**: ğŸŸ¢ LOW

**Description**: Search engines may see English and Urdu pages as duplicate content.

**Mitigation**:
- Docusaurus automatically adds `hreflang` tags linking English/Urdu versions
- Separate sitemaps for each locale (`sitemap.xml`, `ur/sitemap.xml`)
- `lang` attribute on HTML correctly identifies language
- Google treats different languages as distinct content (not duplicates)

**Detection**: Google Search Console (monitor index status)

**Rollback**: N/A (Docusaurus handles this automatically)

## Success Metrics & Validation

### Build-Time Validation

**Checklist**:
- [ ] `npm run build` completes without errors
- [ ] Both `build/` and `build/ur/` directories exist
- [ ] Translated MDX files appear in `build/ur/docs/`
- [ ] Sidebar JSON is processed correctly (no missing labels)
- [ ] No broken links in either locale

**Automated Checks**:
```bash
# Verify build outputs
test -d frontend/build && test -d frontend/build/ur
echo "âœ“ Both locales built successfully"

# Check for Urdu content
ls frontend/build/ur/docs/part-1-foundations-lab/chapter-01-embodied-ai/index.html
echo "âœ“ Urdu chapter pages generated"
```

### Runtime Validation

**Manual Test Cases**:

1. **Language Switching (SC-001)**:
   - Visit `/docs/part-1-foundations-lab/chapter-01-embodied-ai`
   - Click localeDropdown â†’ Select "Ø§Ø±Ø¯Ùˆ"
   - Verify navigation to `/ur/docs/part-1-foundations-lab/chapter-01-embodied-ai`
   - Verify content is in Urdu
   - **Expected**: < 2 second navigation time

2. **RTL Layout (SC-002)**:
   - Visit any `/ur/docs/*` URL
   - Open DevTools â†’ Check `<html dir="rtl" lang="ur-PK">`
   - Verify text flows right-to-left
   - Verify sidebar appears on right side
   - **Expected**: 100% of Urdu pages have RTL layout

3. **Code Blocks Preservation (SC-003)**:
   - Visit `/ur/docs/part-2-robotic-nervous-system/chapter-04-ros2-architecture`
   - Inspect Python code blocks
   - Verify code is in English (not translated)
   - **Expected**: All code blocks remain in English

4. **Shareable URLs (SC-004)**:
   - Copy `/ur/docs/*` URL from browser
   - Open in incognito/private window
   - Verify Urdu content loads correctly
   - **Expected**: Direct URL access works 100% of time

5. **Homepage/Auth Remains English**:
   - Visit `/ur/`
   - Verify homepage content is in English
   - Visit `/ur/auth`
   - Verify auth page is in English
   - **Expected**: Non-docs pages remain English-only

6. **Sidebar Labels in Urdu (SC-007)**:
   - Visit `/ur/docs/*`
   - Check sidebar navigation
   - Verify chapter titles are in Urdu
   - Verify category labels are in Urdu
   - **Expected**: All sidebar labels display in Urdu

### Performance Validation

**Metrics**:
- Language switch time: < 2 seconds (SC-001)
- Page load time: No degradation vs English pages
- Build time: < 2x increase with Urdu locale added

**How to Measure**:
```bash
# Build time comparison
time npm run build  # With Urdu locale
# vs
time npm run build  # English only (baseline)

# Page load time (Chrome DevTools Network tab)
# Compare /docs/chapter-01 vs /ur/docs/chapter-01
```

## Dependencies & Assumptions

### External Dependencies

1. **Docusaurus 3.x**:
   - Native i18n support with locale paths
   - Built-in `localeDropdown` component
   - Automatic RTL layout handling
   - **Risk**: Breaking changes in future versions (low risk, stable API)

2. **Vercel Platform**:
   - Static site hosting with automatic locale detection
   - Root Directory configuration support
   - **Requirement**: Must set Framework and Root Directory in dashboard

3. **Pre-Translated Content**:
   - Urdu MDX files must exist in `i18n/ur/.../current/`
   - Sidebar labels must exist in `current.json`
   - **Assumption**: Translation work is done separately (not part of this feature)

### Assumptions

1. **English as Source of Truth**:
   - All new chapters written in English first
   - Urdu translations updated after English content stabilizes
   - If Urdu translation missing, English content is acceptable fallback

2. **Docs-Only Translation Scope**:
   - Homepage remains English-only (accepted by users)
   - Auth system remains English-only (simplifies security)
   - Navbar/footer UI elements remain English (minimal impact)

3. **No Dynamic Language Switching**:
   - Language selection requires page navigation (Docusaurus standard)
   - No client-side content swapping (not needed for static site)

4. **Modern Browser Support**:
   - RTL layout works in all modern browsers (Chrome, Firefox, Safari, Edge)
   - No IE11 support required (standard Docusaurus assumption)

5. **Vercel Deployment**:
   - Project continues using Vercel (not switching to Netlify, GitHub Pages, etc.)
   - Vercel configuration via dashboard (not vercel.json build commands)

## Rollout Plan

### Phase 1: Configuration & Initial Translations
**Deliverables**:
- Update `docusaurus.config.ts` with i18n config and localeDropdown
- Add `trailingSlash: false` for Vercel compatibility
- Populate `i18n/ur/docusaurus-plugin-content-docs/current.json` with sidebar labels
- Translate at least 3 chapters (Part 1: Chapters 1-3) to validate system

**Validation**:
- Local build (`npm run build`) succeeds
- Both `build/` and `build/ur/` directories created
- Urdu chapters render correctly in local preview

**Rollback**: Remove i18n config, delete `i18n/ur/` directory

---

### Phase 2: Full Translation & Vercel Deployment
**Deliverables**:
- Complete all Urdu translations (Chapters 1-9 across Part 1-2)
- Configure Vercel dashboard: Framework "Docusaurus (v2+)", Root Directory "frontend"
- Deploy to production
- Test all `/ur/docs/*` URLs in production

**Validation**:
- All Urdu URLs return 200 status (no 404s)
- RTL layout displays correctly in production
- Language switching works via navbar dropdown

**Rollback**:
1. Revert `docusaurus.config.ts` to remove i18n config
2. Redeploy (Vercel automatically rebuilds English-only site)

---

### Phase 3: Monitoring & Iteration
**Deliverables**:
- Monitor Vercel analytics for `/ur/docs/*` traffic
- Collect user feedback on translation quality
- Add remaining Urdu chapters as translations become available

**Validation**:
- No 404 errors on Urdu URLs
- No user-reported RTL layout issues
- Incremental translation updates deploy successfully

**Rollback**: N/A (gradual improvement, no breaking changes)

## Open Questions & Follow-ups

### Resolved via Spec Clarifications

âœ… **Q1: Should the entire website be translated or just docs?**
- **Answer**: Docs-only translation (spec clarification)

âœ… **Q2: Which i18n approach to use?**
- **Answer**: Native Docusaurus i18n with localeDropdown (spec clarification)

âœ… **Q3: Should language preferences auto-redirect users?**
- **Answer**: No auto-redirect, user-controlled navigation (spec clarification)

### No Open Questions Remaining

All architectural decisions resolved. Implementation ready to proceed to task generation phase.

## References

- [Docusaurus i18n Official Guide](https://docusaurus.io/docs/i18n/introduction)
- [Docusaurus i18n Tutorial](https://docusaurus.io/docs/i18n/tutorial)
- [Vercel Docusaurus Deployment Guide](https://vercel.com/guides/deploying-docusaurus-with-vercel)
- Project spec: `specs/002-urdu-translation/spec.md`
